<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>셀프 쿵쿵따 과제</title>
</head>
<body>
    <div><span id="order">1</span>번째 참가자</div>
    <div>제시어:<span id="word"> </span></div>

    <input type="text" id="text-value">
    <button id="btn">입력</button>
    <div><span id="result"></span></div>


    <script>
        const number = parseInt(prompt('몇명이 참가하나요?')); //참가인원
        const wordTxt = document.querySelector('#word'); //제시어, 입력단어
        const count = document.querySelector('#order'); //현재 몇번째 참가자인지
        const inputValue = document.querySelector('#text-value'); //입력창값
        const btn = document.querySelector('#btn');
        const result = document.querySelector('#result'); 
        const body = document.querySelector('body');
        let word; 
        let newWord; //새로운 단어


        //참가인원 제시하지 않았을 때
        if(number === number){
            const putValue = function(){
                if((!word || word[word.length - 1] === newWord[0])){
                    word = newWord;
                    wordTxt.textContent = word;

                    const countNum = Number(count.textContent);
                    if(countNum + 1 > number){
                        count.textContent = 1;
                    }else{
                        count.textContent = countNum + 1;
                    }
                    result.innerHTML = '';
                }else{
                    result.innerHTML = '틀렸습니다. 다시 입력해주세요';
                }
  
                inputValue.value = '';
                inputValue.focus();
            }

            const txtValue = function(e){
                if(e.target.value.length < 4){
                    newWord = e.target.value;
                }else{
                    inputValue.value = '';
                    inputValue.focus();
                    result.innerHTML = '3글자를 입력해주세요!!'
                }
                
            }

            btn.addEventListener('click', putValue);
            inputValue.addEventListener('input', txtValue);

        }else{
            alert('아무도 참가하지 않았습니다.');
            body.innerHTML = `<div>게임을 진행하지 않습니다.</div>`;
        };

    </script>
    
</body>
</html>